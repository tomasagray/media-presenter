/*! For license information please see mp.min.js.LICENSE.txt */
(()=>{var e={151(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}};e.exports=t},939(e){var t,a;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&a.rotl(e,8)|4278255360&a.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=a.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,r=0;a<e.length;a++,r+=8)t[r>>>5]|=e[a]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var a=[],r=0;r<e.length;r+=3)for(var o=e[r]<<16|e[r+1]<<8|e[r+2],i=0;i<4;i++)8*r+6*i<=8*e.length?a.push(t.charAt(o>>>6*(3-i)&63)):a.push("=");return a.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var a=[],r=0,o=0;r<e.length;o=++r%4)0!=o&&a.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*o+8)-1)<<2*o|t.indexOf(e.charAt(r))>>>6-2*o);return a}},e.exports=a},206(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},503(e,t,a){var r,o,i,n,s;r=a(939),o=a(151).utf8,i=a(206),n=a(151).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?n.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var a=r.bytesToWords(e),l=8*e.length,d=1732584193,c=-271733879,u=-1732584194,p=271733878,g=0;g<a.length;g++)a[g]=16711935&(a[g]<<8|a[g]>>>24)|4278255360&(a[g]<<24|a[g]>>>8);a[l>>>5]|=128<<l%32,a[14+(l+64>>>9<<4)]=l;var f=s._ff,m=s._gg,v=s._hh,h=s._ii;for(g=0;g<a.length;g+=16){var y=d,b=c,w=u,C=p;d=f(d,c,u,p,a[g+0],7,-680876936),p=f(p,d,c,u,a[g+1],12,-389564586),u=f(u,p,d,c,a[g+2],17,606105819),c=f(c,u,p,d,a[g+3],22,-1044525330),d=f(d,c,u,p,a[g+4],7,-176418897),p=f(p,d,c,u,a[g+5],12,1200080426),u=f(u,p,d,c,a[g+6],17,-1473231341),c=f(c,u,p,d,a[g+7],22,-45705983),d=f(d,c,u,p,a[g+8],7,1770035416),p=f(p,d,c,u,a[g+9],12,-1958414417),u=f(u,p,d,c,a[g+10],17,-42063),c=f(c,u,p,d,a[g+11],22,-1990404162),d=f(d,c,u,p,a[g+12],7,1804603682),p=f(p,d,c,u,a[g+13],12,-40341101),u=f(u,p,d,c,a[g+14],17,-1502002290),d=m(d,c=f(c,u,p,d,a[g+15],22,1236535329),u,p,a[g+1],5,-165796510),p=m(p,d,c,u,a[g+6],9,-1069501632),u=m(u,p,d,c,a[g+11],14,643717713),c=m(c,u,p,d,a[g+0],20,-373897302),d=m(d,c,u,p,a[g+5],5,-701558691),p=m(p,d,c,u,a[g+10],9,38016083),u=m(u,p,d,c,a[g+15],14,-660478335),c=m(c,u,p,d,a[g+4],20,-405537848),d=m(d,c,u,p,a[g+9],5,568446438),p=m(p,d,c,u,a[g+14],9,-1019803690),u=m(u,p,d,c,a[g+3],14,-187363961),c=m(c,u,p,d,a[g+8],20,1163531501),d=m(d,c,u,p,a[g+13],5,-1444681467),p=m(p,d,c,u,a[g+2],9,-51403784),u=m(u,p,d,c,a[g+7],14,1735328473),d=v(d,c=m(c,u,p,d,a[g+12],20,-1926607734),u,p,a[g+5],4,-378558),p=v(p,d,c,u,a[g+8],11,-2022574463),u=v(u,p,d,c,a[g+11],16,1839030562),c=v(c,u,p,d,a[g+14],23,-35309556),d=v(d,c,u,p,a[g+1],4,-1530992060),p=v(p,d,c,u,a[g+4],11,1272893353),u=v(u,p,d,c,a[g+7],16,-155497632),c=v(c,u,p,d,a[g+10],23,-1094730640),d=v(d,c,u,p,a[g+13],4,681279174),p=v(p,d,c,u,a[g+0],11,-358537222),u=v(u,p,d,c,a[g+3],16,-722521979),c=v(c,u,p,d,a[g+6],23,76029189),d=v(d,c,u,p,a[g+9],4,-640364487),p=v(p,d,c,u,a[g+12],11,-421815835),u=v(u,p,d,c,a[g+15],16,530742520),d=h(d,c=v(c,u,p,d,a[g+2],23,-995338651),u,p,a[g+0],6,-198630844),p=h(p,d,c,u,a[g+7],10,1126891415),u=h(u,p,d,c,a[g+14],15,-1416354905),c=h(c,u,p,d,a[g+5],21,-57434055),d=h(d,c,u,p,a[g+12],6,1700485571),p=h(p,d,c,u,a[g+3],10,-1894986606),u=h(u,p,d,c,a[g+10],15,-1051523),c=h(c,u,p,d,a[g+1],21,-2054922799),d=h(d,c,u,p,a[g+8],6,1873313359),p=h(p,d,c,u,a[g+15],10,-30611744),u=h(u,p,d,c,a[g+6],15,-1560198380),c=h(c,u,p,d,a[g+13],21,1309151649),d=h(d,c,u,p,a[g+4],6,-145523070),p=h(p,d,c,u,a[g+11],10,-1120210379),u=h(u,p,d,c,a[g+2],15,718787259),c=h(c,u,p,d,a[g+9],21,-343485551),d=d+y>>>0,c=c+b>>>0,u=u+w>>>0,p=p+C>>>0}return r.endian([d,c,u,p])})._ff=function(e,t,a,r,o,i,n){var s=e+(t&a|~t&r)+(o>>>0)+n;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,a,r,o,i,n){var s=e+(t&r|a&~r)+(o>>>0)+n;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,a,r,o,i,n){var s=e+(t^a^r)+(o>>>0)+n;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,a,r,o,i,n){var s=e+(a^(t|~r))+(o>>>0)+n;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var a=r.wordsToBytes(s(e,t));return t&&t.asBytes?a:t&&t.asString?n.bytesToString(a):r.bytesToHex(a)}}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};a.r(e),a.d(e,{fetchFromRepoAt:()=>f,formatSeconds:()=>u,getLinkUrl:()=>p,getLinksArray:()=>g,getViewportDimensions:()=>w,onEndSwipe:()=>y,onStartSwipe:()=>h,setupSelectedNavItem:()=>b});var t={};a.r(t),a.d(t,{fetchVideoById:()=>T,loadVideo:()=>k});var r={};a.r(r),a.d(r,{fetchImageAt:()=>M,fetchImageAtPosition:()=>V,fetchImageById:()=>I,fetchImages:()=>_,fetchPictureCount:()=>B,loadImage:()=>E,loadImages:()=>x});var o={};a.r(o),a.d(o,{fetchComic:()=>P,fetchComicForPage:()=>O,fetchComics:()=>F,getComicPageLinks:()=>L,isComic:()=>W,loadComic:()=>H,loadComics:()=>U});var i={};a.r(i),a.d(i,{clearState:()=>N,getState:()=>R,setState:()=>D});var n={};a.r(n),a.d(n,{toggleFavorite:()=>X});var s={};a.r(s),a.d(s,{attachVideoCardHandlers:()=>me,pauseUnpauseVideo:()=>ge,resetIdleTimer:()=>we,setupVideoPlayer:()=>fe,skipVideoTime:()=>ve});var l={};a.r(l),a.d(l,{attachImageCycleSwipe:()=>De,attachImageHandlers:()=>Oe,attachImageViewerHandlers:()=>ze});var d={};a.r(d),a.d(d,{addTag:()=>ot,clearEditDialog:()=>st,onSaveEditDialog:()=>dt,onSearchValueChange:()=>nt,showEditDialog:()=>rt});var c={};a.r(c),a.d(c,{onHideSearchModal:()=>pt,onShowSearchModal:()=>ut}),console.debug("mp.util.js was picked up");const u=e=>{const t=new Date(null);t.setSeconds(e);let a=e>=3600?11:14;return t.toISOString().slice(a,19)},p=(e,t)=>e.links.find(e=>e.rel===t)?.href,g=e=>Object.entries(e).map(e=>({rel:e[0],href:e[1].href})),f=(e,t)=>{let a=0,r=null,o=e.values();for(;a<=t;)r=o.next().value,a++;return r};let m=0,v=0;const h=e=>{m=e.changedTouches[0].screenX},y=(e,t,a)=>{v=e.changedTouches[0].screenX,Math.abs(m-v)>10&&(m>v?t():a())},b=()=>{let e=window.location.href,t=e.match(/home|videos|pictures|comics/);if(t){let e=t[0],a=`${e}-link`;document.getElementById(a).innerHTML=`<img alt="${e}" src="/img/icon/${e}_selected/${e}_selected_64.png" />`}else e.match(/favorites/)?$("#favorites-link").html('<img alt="Favorites" src="/img/icon/favorite/favorite_64.png" />'):$("#home-link").html('<img alt="Home" src="/img/icon/home_selected/home_selected_64.png" />')},w=()=>({width:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)});console.debug("mp.video_repo.js was picked up");const C=new Map,k=e=>{e&&e.id&&C.set(e.id,e)},T=e=>{for(let t=0;t<C.size;t++){let a=f(C,t);if(a.id===e)return{pos:t,data:a}}};console.debug("mp.image_repo.js was picked up");const S=new Map,x=e=>{e&&e.forEach(e=>E(e))},E=e=>{e&&e.id&&S.set(e.id,e)},_=()=>S,I=e=>{for(let t=0;t<S.size;t++){let a=V(t);if(a.id===e)return{pos:t,data:a}}},V=e=>f(S,e),j=(e,t)=>e.links.filter(e=>e.rel===t)[0],M=e=>{for(let t=0;t<S.size;t++){let a=f(S,t);if(j(a,"data").href===e)return{pos:t,data:a}}return null},B=()=>S.size;console.debug("mp.comic_repo.js was picked up");const A=new Map,W=e=>{if(!e)return!1;let{links:t}=e;if(!t)return!1;let a=t.find(e=>e.rel.includes("page_"));return null!=a&&void 0!==a.href&&null!==a.href},L=e=>e.links.filter(e=>e.rel.includes("page_")),H=e=>{e&&e.id&&A.set(e.id,e)},U=e=>e&&e.forEach(e=>H(e)),F=()=>A,P=e=>A.get(e),O=e=>{let t=null;return A.forEach(a=>{L(a).forEach(r=>{r.href===e&&(t=a)})}),t};console.debug("mp.state.js was picked up");let z={};const D=e=>{z={...z,...e}},R=()=>({...z}),N=()=>{z={}};console.debug("mp.endpoints.js was picked up");const X=async(e,t)=>{const a=$(".Favorite-button");a.attr("enabled",!1),a.removeClass("favorite"),a.addClass("loading");let r={url:e,method:"PATCH"};await $.ajax(r).done(e=>t&&t(e)).fail(e=>console.error("favoriting failed!",e)).always(()=>{a.removeClass("loading"),a.attr("enabled",!0)})};console.debug("mp.video.js was picked up");const q=$(".Viewer-controls-container"),J=$("#Footer-menu-container"),Z=$("#Video-player-container"),G=$("#Video-player"),K=$("#Video-play-indicator"),Q=$("#Viewer-container"),Y=$("#Close-viewer-button"),ee=$("#Toggle-favorite-button"),te=$("#Video-play-indicator-button"),ae=$("#Video-current-time"),re=$("#Video-duration"),oe=$("#Video-time-slider-control"),ie=$(".Video-time-indicator"),ne=(e,t)=>{let a=0;for(let r=0;r<e.length;r++)if(e[r].classList.contains("current")){e[r].classList.remove("current"),a=t(r,e.length);break}e[a].classList.add("current")},se=e=>ne(e,(e,t)=>e===t-1?0:e+1);$(window).resize(()=>{"block"===Z.css("display")&&ce()});let le,de=0;const ce=()=>{let{width:e,height:t}=w();e>t&&de>le?G.removeClass("CW").addClass("rotate CCW"):t>e&&le>de?G.removeClass("CCW").addClass("rotate CW"):G.removeClass("rotate CW CCW")},ue=e=>{k(e),D({title:e.title,tags:e.tags})},pe=()=>{Q.css("display","none"),J.css("display","flex"),Z.css("display","none"),$("body").css("overflow","revert"),ie.text("--:--"),G.attr("src",null),G[0].load()},ge=e=>{e[0].paused?(e=>{e.trigger("play"),K.attr("src","/img/icon/pause/pause_32.png")})(e):(e=>{e.trigger("pause"),K.attr("src","/img/icon/play/play_32.png")})(e)},fe=()=>{oe.slider({range:"min",min:0,max:100,classes:{"ui-slider":"Video-time-slider","ui-slider-handle":"Video-time-slider-handle","ui-slider-range":"Video-time-range"},slide:(e,t)=>{const a=G[0];a.currentTime=a.duration*(t.value/100)}}),G.on("loadedmetadata",()=>{re.text("0:00");let e=Math.round(G[0].duration);re.text(u(e))}),G.on("timeupdate",()=>{const e=G[0].currentTime,t=e/G[0].duration*100;let a=Math.round(e);ae.text(u(a)),oe.slider("value",t)}),G.on("click",()=>ge(G)),$(document).on("keyup",e=>{32===e.keyCode&&ge(G)}),te.on("click",()=>ge(G))},me=e=>{let t=$("#"+e);t.on("click",()=>(e=>{let t=T(e).data;$("body").css("overflow","hidden"),Y.on("click",pe),(e=>{let{favorite:t}=e,a=p(e,"favorite");t?ee.addClass("favorite"):ee.removeClass("favorite"),ee.unbind().click(()=>X(a,e=>{e.favorite?ee.addClass("favorite"):ee.removeClass("favorite")}))})(t),D({id:t.id,title:t.title,tags:t.tags,updateUrl:p(t,"update"),updateSuccess:ue}),J.css("display","none"),Q.css("display","block"),Z.css("display","block"),G.on("loadedmetadata",e=>{le=e.target.videoWidth,de=e.target.videoHeight,ce()});let a=(r=t.links,r?.find(e=>"data"===e.rel)?.href);var r;G.attr("src",a),G[0].load()})(e)),(e=>{const t=e.find(".Display-image");e.on("touchstart",e=>h(e)),e.on("touchend",e=>y(e,()=>se(t),()=>(e=>ne(e,(e,t)=>0===e?t-1:e-1))(t)))})(t);let a,r=t.find(".Display-image");r[0].classList.add("current"),t.on("mouseenter",()=>a=(e=>setInterval(()=>se(e),1e3))(r)),t.on("mouseleave",()=>clearInterval(a))},ve=e=>{let t=G[0].currentTime+e;(t<=0||t>=G[0].duration)&&(t=0),console.log("skipping video to ",t),G[0].currentTime=t};let he,ye;const be=()=>{ye=q.css("display"),q.fadeOut("fast")},we=()=>{clearTimeout(he),he=setTimeout(be,5e3),q.stop().css({opacity:1,display:ye??"flex"})};console.debug("mp.image.js was picked up");const Ce=$("#Viewer-container"),$e=$("#Close-viewer-button"),ke=$("#Toggle-favorite-button"),Te=$("#Page-counter"),Se=$("#image-viewer-container"),xe=$("#image-viewer"),Ee=$("#image-viewer-display"),_e=$("#Footer-menu-container");$(window).resize(()=>{"block"===Se.css("display")&&Ie()});const Ie=()=>{let{url:e,isFav:t,favUrl:a,pages:r}=R();(e=>{let t=new Image;t.onload=()=>{let{width:e,height:a}=w();e>a&&t.height>t.width?(Ee.removeClass("CW"),Ee.addClass("rotate CCW"),navigator.platform.includes("Mac")&&$("#image-viewer-display").css("transform","translate(15vw, -15%) rotate(-90deg)")):a>e&&t.width>t.height?(Ee.removeClass("CCW"),Ee.addClass("rotate CW")):(Ee.removeClass("rotate CW CCW"),navigator.platform.includes("Mac")&&$("#image-viewer-display").css("transform",""))},t.src=e})(e),Ee.css("background-image",`url(${e})`),(e=>{e?ke.addClass("favorite"):ke.removeClass("favorite")})(t),(e=>{if(e){let{current:t,total:a}=e,r=t+1;Te.css("visibility","visible"),Te.text(`${r} / ${a}`)}else Te.css("visibility","hidden")})(r)},Ve=(e,t)=>{let a,r,{url:o,pages:i}=R(),n=t;if(i)a=e(i),r=((e,t,a)=>{let r=O(e);return{url:L(r)[t].href,isFav:r.favorite,favLink:p(r,"favorite"),pages:{current:t,total:a.total}}})(o,a,i);else{a=n(M(o));let e=V(a);r={url:p(s=e,"data"),isFav:s.favorite,favUrl:p(s,"favorite"),pages:null}}var s;D(r),Ie()},je=()=>{Ve(e=>0===e.current?e.total-1:--e.current,e=>0===e.pos?B()-1:--e.pos)},Me=()=>{Ve(e=>e.current>=e.total-1?0:++e.current,e=>e.pos>=B()-1?0:++e.pos)},Be=e=>{E(Fe(e)),We(e.id)},Ae=e=>{H(Fe(e)),Le(e.id)},We=e=>{let t={id:(a=I(e).data).id,title:a.title,tags:a.tags,isFav:a.favorite,pages:null,url:p(a,"data"),favUrl:p(a,"favorite"),updateUrl:p(a,"update"),updateSuccess:Be};var a;D(t),Ie()},Le=e=>{Te.css("display","block");let t=(e=>{let t=L(e);return{id:e.id,title:e.title,tags:e.tags,url:t[0].href,pages:{current:0,total:t.length},isFav:e.favorite??!1,favUrl:p(e,"favorite"),updateUrl:p(e,"update"),updateSuccess:Ae}})(P(e));D(t),Ie()},He=(e,t)=>{$("body").css("overflow","hidden"),$e.on("click",()=>Ue()),ke.on("click",()=>Pe()),Ce.css("display","block"),Se.css("display","block"),xe.css("display","block"),_e.css("display","none"),t?Le(e):We(e)},Ue=()=>{$("body").css("overflow","revert"),Ce.css("display","none"),Se.css("display","none"),_e.css("display","flex"),xe.css("display","none")},Fe=e=>{let{_links:t,...a}=e;return{...a,links:g(t)}},Pe=async()=>{let{favUrl:e,pages:t}=R(),a=null!==t;await X(e,e=>{let t=Fe(e);a?H(t):E(t),e.favorite?ke.addClass("favorite"):ke.removeClass("favorite")})},Oe=e=>{const t=$(`#${e.id}`);W(e)?t.on("click",()=>He(e.id,!0)):t.on("click",()=>He(e.id,!1))},ze=()=>{const e=Se;De(e),$(document).on("keydown",t=>{let a=e.css("display");a&&"none"!==a&&("ArrowLeft"===t.key&&je(),"ArrowRight"===t.key&&Me())})},De=e=>{e.on("touchstart",e=>h(e)),e.on("touchend",e=>y(e,()=>Me(),()=>je()))};var Re=a(503),Ne=a.n(Re);console.debug("mp.edit-modal.js was picked up");const Xe=$("#Entity-title"),qe=$("#Tag-input"),Je=$("#Tag-list"),Ze=$("#Edit-dialog"),Ge=$("#Save-button"),Ke=$("#Save-button span"),Qe=$("#Save-button .Loading-spinner"),Ye=$("#Tag-suggestion-container"),et=$("#Tag-suggestions"),tt=()=>{Je.html(""),qe.val(""),at()},at=()=>{const{editedEntity:e}=R();if(!e)return;const{title:t,tags:a}=e;Xe.val(t),a?.forEach(e=>{let{tagId:t,name:a}=e;const r=$(document.createElement("button"));r.attr("id",t),r.addClass("Entity-tag"),r.text(a),r.on("click",()=>it(t)),Je.append(r)})},rt=()=>{const e=R();D({editedEntity:{id:e.id,title:e.title,tags:e.tags}}),at(),Ze.css("display","flex")},ot=()=>{const{editedEntity:e}=R(),{tags:t}=e;let a=qe.val(),r=t??[];for(let e=0;e<r.length;e++)if(r[e].name===a)return void qe.val("");D({editedEntity:{...e,tags:[...r,{name:a,tagId:Ne()(a)}]}}),qe.val(""),tt()},it=e=>{const{editedEntity:t}=R(),{tags:a}=t,r=a.filter(t=>t.tagId!==e);D({editedEntity:{...t,tags:r}}),tt()},nt=e=>{""!==e?$.ajax({url:"/tags/search",data:{q:e}}).done(t=>{et.html(""),t&&t.length>0&&(Ye.removeClass("hidden"),t.filter(t=>t.name!==e).forEach(e=>{const t=document.createElement("li");t.className="Tag-suggestion",t.innerHTML=e.name,t.onclick=e=>(e=>{Ye.addClass("hidden"),qe.val(e),ot()})($(e.target).text()),et.append(t)}))}):Ye.addClass("hidden")},st=()=>{Ze.css("display","none"),D({editedEntity:{title:null,tags:[]},editedTag:""}),tt(),lt()},lt=()=>{Ge.prop("disabled",!1),Ke.css("display","flex"),Qe.css("display","none"),qe.prop("disabled",!1)},dt=()=>{const{editedEntity:e,updateUrl:t,updateSuccess:a}=R();Ge.prop("disabled",!0),qe.prop("disabled",!0),Ke.css("display","none"),Qe.css("display","inline-block"),((e,t,a)=>{console.log("updating entity at",e);const r={url:e,method:"PATCH",contentType:"application/json",data:JSON.stringify(t)};$.ajax(r).done(e=>{st(),a&&a(e)}).fail(e=>{st(),console.error("failed updating!",e)})})(t,e,e=>{lt(),a&&a(e)})};console.debug("mp.search.js was picked up");let ct=null;const ut=()=>{$("#search-modal").css("display","flex"),$("#search-form-input").focus(),setTimeout(()=>{var e;e=".Search-form-container",ct=t=>{null===t.target.closest(e)&&$(e).is(":visible")&&pt()},document.addEventListener("click",ct)},50)},pt=()=>{$("#search-modal").css("display","none"),document.removeEventListener("click",ct)};window.mp={videoRepo:t,imageRepo:r,comicRepo:o,video:s,image:l,editModal:d,search:c,util:e,endpoints:n,state:i}})()})();